[
  {
    "chunk_id": 1,
    "text": "The batch Aggregation agent's configuration dialog contains the following tabs: Aggregation - This tab contains the three subsidiary tabs, General , APL Code and Storage. Thread Buffer - For further information about the Thread Buffer tab, see Workflow Template . General Tab The General tab enables you to assign an Aggregation profile to the agent and to define error handling. With the Error Handling settings, you can decide what you want to do if no timeout has been set in the code or if there are unmatched UDRs. Open The Aggregation agent configuration dialog - General tab Setting Description Setting Description Profile In batch workflows, the profile must use file storage, Elasticsearch or SQL. All the workflow instances in the same workflow template can use different Aggregation profiles. For this to work, the profile has to be set to Default in the Field settings tab in the Workflow Properties dialog. After that, each workflow in the Workflow Table can be assigned with the correct profile. Force Read Only Select this check box to only use the Aggregation Storage for reading aggregation session data. Selecting this check box also means that the agent cannot create new sessions when an incoming UDR cannot be matched to an existing session. A UDR for which no matching session is found is handled according to the setting If No UDR Match is Found. If you enable the read only mode, timeout and defragmentation handling is also disabled. Note! When you are using file storage and sharing an Aggregation profile across several workflow configurations, the read and write lock mechanisms that are applied to the stored sessions must be considered: There can only be one write lock at a time in a profile. This means that all but one Aggregation agent must have the Force Read Only setting enabled. If all of the Aggregation agents are configured with Force Read Only , any number of read locks can be granted in the profile. If one write lock or more is set, a read lock cannot be granted. If Timeout is Missing Select the action to take if timeout for sessions is not set in the APL code using sessionTimeout . The setting is evaluated after each consume or timeout function block has been called (assuming the session has not been removed). The available options are: Ignore - Do nothing. This may leave sessions forever in the system if the closing UDR does not arrive. Abort - Abort the agent execution. This option is used if a timeout must be set at all times. Hence, a missing timeout is considered being a configuration error. Use Default Timeout - Allow the session timeout to be set here instead of within the code. If enabled, a field becomes available. In this field, enter the timeout, in seconds. If No UDR Match is Found Select the action that the agent should take when a UDR that arrives does not match any session, and Create Session on Failure is disabled: Ignore - Discard the UDR. Abort - Abort the agent execution. Select this option if all UDRs are associated with a session. This error case indicates a configuration error. Route - Send the UDR on the route selected from the on list. This is a list of output routes on which the UDR can be sent. The list is activated only if Route is selected. APL Code Tab The APL Code tab enables you to manage the detailed behavior of the Aggregation agent. You use the Analysis Programming Language (APL) with some limitations but also with additional functionality. For further information see the APL Reference Guide . The main function block of the code is consume . This block is invoked whenever a UDR has been associated with a session. The timeout block enables you to handle sessions that have not been successfully closed, e g if the final UDR has not arrived. Open Aggregation agent configuration dialog - APL Code tab Item Description Code Area This is where you write your APL code. For further information about the code area and its right-click menu, see Text Editor in Administration and Management in Legacy Desktop . Compilation Test... Use this button to compile the entered code and check for validity. The status of the compilation is displayed in a dialog. Upon failure, the erroneous line is highlighted and a message, including the line number, is displayed. Outline Use this button to display or hide the APL Code Editor Outline navigation panel. The navigation panel provides a view of all the blocks, variables and methods in an APL code configuration and makes it possible to easily navigate between different types in the APL code. For further information on the Outline navigation panel, see the link above. Storage Tab The Storage tab contains settings that are specific for the selected storage in the Aggregation profile. Different settings are available in batch and real-time workflows. File Storage Open The Aggregation agent configuration dialog - Storage tab for File Storage Setting Description Setting Description Defragment Session Storage Files For batch workflows, the Aggregation session storage can optionally be defragmented to minimize disk usage. When checked, configure the defragmentation parameters: Defragment After Every [] Batch(es) Run defragmentation after the specified number of batches. Enter the number of batches to process before each defragmentation. Defragment if Batch(es) Finishes Within [] Second(s) Set a value to limit how long the defragmentation is allowed to run. This time limitation depends on the execution time of the last batch processed. If the last batch is finished within the specified number of seconds, the remaining time will be used for the defragmentation. The limit accuracy is +/- 5 seconds. Defragment Session Files Older Than [] Minute(s) Run defragmentation on session storage files that are older than this value to minimize moving recently created sessions unnecessarily often. Elasticsearch Storage and SQL Storage Open The Aggregation agent configuration agent - Storage tab for Elasticsearch Open The Aggregation agent configuration agent - Storage tab for SQL Setting Description Setting Description If Error Occurs in Storage Select the action that the agent should take when an error occurs in the storage: Ignore - Discard the UDR. Log Event - Discard the UDR and generate a message in the System Log. Route - Send the UDR on the route selected from the on list. This is a list of output routes on which the UDR can be sent. The list is only activated if Route is selected. Disable Timeout Select this check box to disable the timeout handling.",
    "title": "Aggregation Agent Configuration - Batch - MediationZone Documentation 9.4 - InfoZone",
    "url": "https://infozone.atlassian.net/wiki/spaces/MD94/pages/352075296/Aggregation+Agent+Configuration+-+Batch",
    "word_count": 1092,
    "char_count": 6525
  }
]
{
  "url": "https://docs.anthropic.com/en/docs/build-with-claude/streaming",
  "title": "Streaming Messages - Anthropic",
  "text": "Anthropic\nhome page\nEnglish\nSearch...\nSearch...\nNavigation\nCapabilities\nStreaming Messages\nWelcome\nDeveloper Guide\nAPI Guide\nClaude Code\nModel Context Protocol (MCP)\nResources\nRelease Notes\nDocumentation\nDeveloper Discord\nSupport\nFirst steps\nIntro to Claude\nGet started\nModels & pricing\nModels overview\nChoosing a model\nMigrating to Claude 4\nModel deprecations\nPricing\nLearn about Claude\nBuilding with Claude\nFeatures overview\nContext windows\nGlossary\nCapabilities\nPrompt caching\nExtended thinking\nStreaming Messages\nBatch processing\nCitations\nMultilingual support\nToken counting\nEmbeddings\nVision\nPDF support\nFiles API\nGoogle Sheets add-on\nTools\nOverview\nHow to implement tool use\nToken-efficient tool use\nFine-grained tool streaming\nBash tool\nCode execution tool\nComputer use tool\nText editor tool\nWeb search tool\nModel Context Protocol (MCP)\nMCP connector\nRemote MCP servers\nUse cases\nOverview\nTicket routing\nCustomer support agent\nContent moderation\nLegal summarization\nPrompt engineering\nOverview\nClaude 4 best practices\nPrompt generator\nUse prompt templates\nPrompt improver\nBe clear and direct\nUse examples (multishot prompting)\nLet Claude think (CoT)\nUse XML tags\nGive Claude a role (system prompts)\nPrefill Claude's response\nChain complex prompts\nLong context tips\nExtended thinking tips\nTest & evaluate\nDefine success criteria\nDevelop test cases\nUsing the Evaluation Tool\nReducing latency\nStrengthen guardrails\nReduce hallucinations\nIncrease output consistency\nMitigate jailbreaks\nStreaming refusals\nReduce prompt leak\nKeep Claude in character\nLegal center\nAnthropic Privacy Policy\nSecurity and compliance\nWhen creating a Message, you can set\n\"stream\": true\nto incrementally stream the response using\nserver-sent events\n(SSE).\n​\nStreaming with SDKs\nOur\nPython\nand\nTypeScript\nSDKs offer multiple ways of streaming. The Python SDK allows both sync and async streams. See the documentation in each SDK for details.\nPython\nTypeScript\nimport\nanthropic\nclient\n=\nanthropic\n.\nAnthropic\n(\n)\nwith\nclient\n.\nmessages\n.\nstream\n(\nmax_tokens\n=\n1024\n,\nmessages\n=\n[\n{\n\"role\"\n:\n\"user\"\n,\n\"content\"\n:\n\"Hello\"\n}\n]\n,\nmodel\n=\n\"claude-opus-4-20250514\"\n,\n)\nas\nstream\n:\nfor\ntext\nin\nstream\n.\ntext_stream\n:\nprint\n(\ntext\n,\nend\n=\n\"\"\n,\nflush\n=\nTrue\n)\n​\nEvent types\nEach server-sent event includes a named event type and associated JSON data. Each event will use an SSE event name (e.g.\nevent: message_stop\n), and include the matching event\ntype\nin its data.\nEach stream uses the following event flow:\nmessage_start\n: contains a\nMessage\nobject with empty\ncontent\n.\nA series of content blocks, each of which have a\ncontent_block_start\n, one or more\ncontent_block_delta\nevents, and a\ncontent_block_stop\nevent. Each content block will have an\nindex\nthat corresponds to its index in the final Message\ncontent\narray.\nOne or more\nmessage_delta\nevents, indicating top-level changes to the final\nMessage\nobject.\nA final\nmessage_stop\nevent.\nThe token counts shown in the\nusage\nfield of the\nmessage_delta\nevent are\ncumulative\n.\n​\nPing events\nEvent streams may also include any number of\nping\nevents.\n​\nError events\nWe may occasionally send\nerrors\nin the event stream. For example, during periods of high usage, you may receive an\noverloaded_error\n, which would normally correspond to an HTTP 529 in a non-streaming context:\nExample error\nevent\n:\nerror\ndata\n:\n{\n\"type\"\n:\n\"error\"\n,\n\"error\"\n:\n{\n\"type\"\n:\n\"overloaded_error\"\n,\n\"message\"\n:\n\"Overloaded\"\n}\n}\n​\nOther events\nIn accordance with our\nversioning policy\n, we may add new event types, and your code should handle unknown event types gracefully.\n​\nContent block delta types\nEach\ncontent_block_delta\nevent contains a\ndelta\nof a type that updates the\ncontent\nblock at a given\nindex\n.\n​\nText delta\nA\ntext\ncontent block delta looks like:\nText delta\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\"ello frien\"\n}\n}\n​\nInput JSON delta\nThe deltas for\ntool_use\ncontent blocks correspond to updates for the\ninput\nfield of the block. To support maximum granularity, the deltas are\npartial JSON strings\n, whereas the final\ntool_use.input\nis always an\nobject\n.\nYou can accumulate the string deltas and parse the JSON once you receive a\ncontent_block_stop\nevent, by using a library like\nPydantic\nto do partial JSON parsing, or by using our\nSDKs\n, which provide helpers to access parsed incremental values.\nA\ntool_use\ncontent block delta looks like:\nInput JSON delta\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\"{\\\"location\\\": \\\"San Fra\"\n}\n}\n}\nNote: Our current models only support emitting one complete key and value property from\ninput\nat a time. As such, when using tools, there may be delays between streaming events while the model is working. Once an\ninput\nkey and value are accumulated, we emit them as multiple\ncontent_block_delta\nevents with chunked partial json so that the format can automatically support finer granularity in future models.\n​\nThinking delta\nWhen using\nextended thinking\nwith streaming enabled, you’ll receive thinking content via\nthinking_delta\nevents. These deltas correspond to the\nthinking\nfield of the\nthinking\ncontent blocks.\nFor thinking content, a special\nsignature_delta\nevent is sent just before the\ncontent_block_stop\nevent. This signature is used to verify the integrity of the thinking block.\nA typical thinking delta looks like:\nThinking delta\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"thinking_delta\"\n,\n\"thinking\"\n:\n\"Let me solve this step by step:\\n\\n1. First break down 27 * 453\"\n}\n}\nThe signature delta looks like:\nSignature delta\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"signature_delta\"\n,\n\"signature\"\n:\n\"EqQBCgIYAhIM1gbcDa9GJwZA2b3hGgxBdjrkzLoky3dl1pkiMOYds...\"\n}\n}\n​\nFull HTTP Stream response\nWe strongly recommend that you use our\nclient SDKs\nwhen using streaming mode. However, if you are building a direct API integration, you will need to handle these events yourself.\nA stream response is comprised of:\nA\nmessage_start\nevent\nPotentially multiple content blocks, each of which contains:\nA\ncontent_block_start\nevent\nPotentially multiple\ncontent_block_delta\nevents\nA\ncontent_block_stop\nevent\nA\nmessage_delta\nevent\nA\nmessage_stop\nevent\nThere may be\nping\nevents dispersed throughout the response as well. See\nEvent types\nfor more details on the format.\n​\nBasic streaming request\nShell\nPython\ncurl\nhttps://api.anthropic.com/v1/messages\n\\\n--header\n\"anthropic-version: 2023-06-01\"\n\\\n--header\n\"content-type: application/json\"\n\\\n--header\n\"x-api-key:\n$ANTHROPIC_API_KEY\n\"\n\\\n--data\n\\\n'\n{\n\"model\"\n:\n\"claude-opus-4-20250514\"\n,\n\"messages\"\n:\n[\n{\n\"role\"\n:\n\"user\"\n,\n\"content\"\n:\n\"Hello\"\n}\n]\n,\n\"max_tokens\"\n:\n256\n,\n\"stream\"\n:\ntrue\n}\n'\nResponse\nevent\n:\nmessage_start\ndata\n:\n{\n\"type\"\n:\n\"message_start\"\n,\n\"message\"\n:\n{\n\"id\"\n:\n\"msg_1nZdL29xx5MUA1yADyHTEsnR8uuvGzszyY\"\n,\n\"type\"\n:\n\"message\"\n,\n\"role\"\n:\n\"assistant\"\n,\n\"content\"\n:\n[\n]\n,\n\"model\"\n:\n\"claude-opus-4-20250514\"\n,\n\"stop_reason\"\n:\nnull\n,\n\"stop_sequence\"\n:\nnull\n,\n\"usage\"\n:\n{\n\"input_tokens\"\n:\n25\n,\n\"output_tokens\"\n:\n1\n}\n}\n}\nevent\n:\ncontent_block_start\ndata\n:\n{\n\"type\"\n:\n\"content_block_start\"\n,\n\"index\"\n:\n0\n,\n\"content_block\"\n:\n{\n\"type\"\n:\n\"text\"\n,\n\"text\"\n:\n\"\"\n}\n}\nevent\n:\nping\ndata\n:\n{\n\"type\"\n:\n\"ping\"\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\"Hello\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\"!\"\n}\n}\nevent\n:\ncontent_block_stop\ndata\n:\n{\n\"type\"\n:\n\"content_block_stop\"\n,\n\"index\"\n:\n0\n}\nevent\n:\nmessage_delta\ndata\n:\n{\n\"type\"\n:\n\"message_delta\"\n,\n\"delta\"\n:\n{\n\"stop_reason\"\n:\n\"end_turn\"\n,\n\"stop_sequence\"\n:\nnull\n}\n,\n\"usage\"\n:\n{\n\"output_tokens\"\n:\n15\n}\n}\nevent\n:\nmessage_stop\ndata\n:\n{\n\"type\"\n:\n\"message_stop\"\n}\n​\nStreaming request with tool use\nTool use now supports fine-grained streaming for parameter values as a beta feature. For more details, see\nFine-grained tool streaming\n.\nIn this request, we ask Claude to use a tool to tell us the weather.\nShell\nPython\ncurl\nhttps://api.anthropic.com/v1/messages\n\\\n-H\n\"content-type: application/json\"\n\\\n-H\n\"x-api-key:\n$ANTHROPIC_API_KEY\n\"\n\\\n-H\n\"anthropic-version: 2023-06-01\"\n\\\n-d\n'\n{\n\"model\"\n:\n\"claude-opus-4-20250514\"\n,\n\"max_tokens\"\n:\n1024\n,\n\"tools\"\n:\n[\n{\n\"name\"\n:\n\"get_weather\"\n,\n\"description\"\n:\n\"Get the current weather in a given location\"\n,\n\"input_schema\"\n:\n{\n\"type\"\n:\n\"object\"\n,\n\"properties\"\n:\n{\n\"location\"\n:\n{\n\"type\"\n:\n\"string\"\n,\n\"description\"\n:\n\"The city and state, e.g. San Francisco, CA\"\n}\n}\n,\n\"required\"\n:\n[\n\"location\"\n]\n}\n}\n]\n,\n\"tool_choice\"\n:\n{\n\"type\"\n:\n\"any\"\n}\n,\n\"messages\"\n:\n[\n{\n\"role\"\n:\n\"user\"\n,\n\"content\"\n:\n\"What is the weather like in San Francisco?\"\n}\n]\n,\n\"stream\"\n:\ntrue\n}\n'\nResponse\nevent\n:\nmessage_start\ndata\n:\n{\n\"type\"\n:\n\"message_start\"\n,\n\"message\"\n:\n{\n\"id\"\n:\n\"msg_014p7gG3wDgGV9EUtLvnow3U\"\n,\n\"type\"\n:\n\"message\"\n,\n\"role\"\n:\n\"assistant\"\n,\n\"model\"\n:\n\"claude-opus-4-20250514\"\n,\n\"stop_sequence\"\n:\nnull\n,\n\"usage\"\n:\n{\n\"input_tokens\"\n:\n472\n,\n\"output_tokens\"\n:\n2\n}\n,\n\"content\"\n:\n[\n]\n,\n\"stop_reason\"\n:\nnull\n}\n}\nevent\n:\ncontent_block_start\ndata\n:\n{\n\"type\"\n:\n\"content_block_start\"\n,\n\"index\"\n:\n0\n,\n\"content_block\"\n:\n{\n\"type\"\n:\n\"text\"\n,\n\"text\"\n:\n\"\"\n}\n}\nevent\n:\nping\ndata\n:\n{\n\"type\"\n:\n\"ping\"\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\"Okay\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\",\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\" let\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\"'s\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\" check\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\" the\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\" weather\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\" for\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\" San\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\" Francisco\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\",\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\" CA\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\":\"\n}\n}\nevent\n:\ncontent_block_stop\ndata\n:\n{\n\"type\"\n:\n\"content_block_stop\"\n,\n\"index\"\n:\n0\n}\nevent\n:\ncontent_block_start\ndata\n:\n{\n\"type\"\n:\n\"content_block_start\"\n,\n\"index\"\n:\n1\n,\n\"content_block\"\n:\n{\n\"type\"\n:\n\"tool_use\"\n,\n\"id\"\n:\n\"toolu_01T1x1fJ34qAmk2tNTrN7Up6\"\n,\n\"name\"\n:\n\"get_weather\"\n,\n\"input\"\n:\n{\n}\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\"\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\"{\\\"location\\\":\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\" \\\"San\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\" Francisc\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\"o,\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\" CA\\\"\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\", \"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\"\\\"unit\\\": \\\"fah\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\"renheit\\\"}\"\n}\n}\nevent\n:\ncontent_block_stop\ndata\n:\n{\n\"type\"\n:\n\"content_block_stop\"\n,\n\"index\"\n:\n1\n}\nevent\n:\nmessage_delta\ndata\n:\n{\n\"type\"\n:\n\"message_delta\"\n,\n\"delta\"\n:\n{\n\"stop_reason\"\n:\n\"tool_use\"\n,\n\"stop_sequence\"\n:\nnull\n}\n,\n\"usage\"\n:\n{\n\"output_tokens\"\n:\n89\n}\n}\nevent\n:\nmessage_stop\ndata\n:\n{\n\"type\"\n:\n\"message_stop\"\n}\n​\nStreaming request with extended thinking\nIn this request, we enable extended thinking with streaming to see Claude’s step-by-step reasoning.\nShell\nPython\ncurl\nhttps://api.anthropic.com/v1/messages\n\\\n--header\n\"x-api-key:\n$ANTHROPIC_API_KEY\n\"\n\\\n--header\n\"anthropic-version: 2023-06-01\"\n\\\n--header\n\"content-type: application/json\"\n\\\n--data\n\\\n'\n{\n\"model\"\n:\n\"claude-opus-4-20250514\"\n,\n\"max_tokens\"\n:\n20000\n,\n\"stream\"\n:\ntrue,\n\"thinking\"\n:\n{\n\"type\"\n:\n\"enabled\"\n,\n\"budget_tokens\"\n:\n16000\n}\n,\n\"messages\"\n:\n[\n{\n\"role\"\n:\n\"user\"\n,\n\"content\"\n:\n\"What is 27 * 453?\"\n}\n]\n}\n'\nResponse\nevent\n:\nmessage_start\ndata\n:\n{\n\"type\"\n:\n\"message_start\"\n,\n\"message\"\n:\n{\n\"id\"\n:\n\"msg_01...\"\n,\n\"type\"\n:\n\"message\"\n,\n\"role\"\n:\n\"assistant\"\n,\n\"content\"\n:\n[\n]\n,\n\"model\"\n:\n\"claude-opus-4-20250514\"\n,\n\"stop_reason\"\n:\nnull\n,\n\"stop_sequence\"\n:\nnull\n}\n}\nevent\n:\ncontent_block_start\ndata\n:\n{\n\"type\"\n:\n\"content_block_start\"\n,\n\"index\"\n:\n0\n,\n\"content_block\"\n:\n{\n\"type\"\n:\n\"thinking\"\n,\n\"thinking\"\n:\n\"\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"thinking_delta\"\n,\n\"thinking\"\n:\n\"Let me solve this step by step:\\n\\n1. First break down 27 * 453\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"thinking_delta\"\n,\n\"thinking\"\n:\n\"\\n2. 453 = 400 + 50 + 3\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"thinking_delta\"\n,\n\"thinking\"\n:\n\"\\n3. 27 * 400 = 10,800\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"thinking_delta\"\n,\n\"thinking\"\n:\n\"\\n4. 27 * 50 = 1,350\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"thinking_delta\"\n,\n\"thinking\"\n:\n\"\\n5. 27 * 3 = 81\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"thinking_delta\"\n,\n\"thinking\"\n:\n\"\\n6. 10,800 + 1,350 + 81 = 12,231\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"signature_delta\"\n,\n\"signature\"\n:\n\"EqQBCgIYAhIM1gbcDa9GJwZA2b3hGgxBdjrkzLoky3dl1pkiMOYds...\"\n}\n}\nevent\n:\ncontent_block_stop\ndata\n:\n{\n\"type\"\n:\n\"content_block_stop\"\n,\n\"index\"\n:\n0\n}\nevent\n:\ncontent_block_start\ndata\n:\n{\n\"type\"\n:\n\"content_block_start\"\n,\n\"index\"\n:\n1\n,\n\"content_block\"\n:\n{\n\"type\"\n:\n\"text\"\n,\n\"text\"\n:\n\"\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\"27 * 453 = 12,231\"\n}\n}\nevent\n:\ncontent_block_stop\ndata\n:\n{\n\"type\"\n:\n\"content_block_stop\"\n,\n\"index\"\n:\n1\n}\nevent\n:\nmessage_delta\ndata\n:\n{\n\"type\"\n:\n\"message_delta\"\n,\n\"delta\"\n:\n{\n\"stop_reason\"\n:\n\"end_turn\"\n,\n\"stop_sequence\"\n:\nnull\n}\n}\nevent\n:\nmessage_stop\ndata\n:\n{\n\"type\"\n:\n\"message_stop\"\n}\n​\nStreaming request with web search tool use\nIn this request, we ask Claude to search the web for current weather information.\nShell\nPython\ncurl\nhttps://api.anthropic.com/v1/messages\n\\\n--header\n\"x-api-key:\n$ANTHROPIC_API_KEY\n\"\n\\\n--header\n\"anthropic-version: 2023-06-01\"\n\\\n--header\n\"content-type: application/json\"\n\\\n--data\n\\\n'\n{\n\"model\"\n:\n\"claude-opus-4-20250514\"\n,\n\"max_tokens\"\n:\n1024\n,\n\"stream\"\n:\ntrue,\n\"messages\"\n:\n[\n{\n\"role\"\n:\n\"user\"\n,\n\"content\"\n:\n\"What is the weather like in New York City today?\"\n}\n]\n}\n'\nResponse\nevent\n:\nmessage_start\ndata\n:\n{\n\"type\"\n:\n\"message_start\"\n,\n\"message\"\n:\n{\n\"id\"\n:\n\"msg_01G...\"\n,\n\"type\"\n:\n\"message\"\n,\n\"role\"\n:\n\"assistant\"\n,\n\"model\"\n:\n\"claude-opus-4-20250514\"\n,\n\"content\"\n:\n[\n]\n,\n\"stop_reason\"\n:\nnull\n,\n\"stop_sequence\"\n:\nnull\n,\n\"usage\"\n:\n{\n\"input_tokens\"\n:\n2679\n,\n\"cache_creation_input_tokens\"\n:\n0\n,\n\"cache_read_input_tokens\"\n:\n0\n,\n\"output_tokens\"\n:\n3\n}\n}\n}\nevent\n:\ncontent_block_start\ndata\n:\n{\n\"type\"\n:\n\"content_block_start\"\n,\n\"index\"\n:\n0\n,\n\"content_block\"\n:\n{\n\"type\"\n:\n\"text\"\n,\n\"text\"\n:\n\"\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\"I'll check\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\" the current weather in New York City for you\"\n}\n}\nevent\n:\nping\ndata\n:\n{\n\"type\"\n:\n\"ping\"\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n0\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\".\"\n}\n}\nevent\n:\ncontent_block_stop\ndata\n:\n{\n\"type\"\n:\n\"content_block_stop\"\n,\n\"index\"\n:\n0\n}\nevent\n:\ncontent_block_start\ndata\n:\n{\n\"type\"\n:\n\"content_block_start\"\n,\n\"index\"\n:\n1\n,\n\"content_block\"\n:\n{\n\"type\"\n:\n\"server_tool_use\"\n,\n\"id\"\n:\n\"srvtoolu_014hJH82Qum7Td6UV8gDXThB\"\n,\n\"name\"\n:\n\"web_search\"\n,\n\"input\"\n:\n{\n}\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\"\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\"{\\\"query\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\"\\\":\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\" \\\"weather\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\" NY\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\"C to\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n1\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"input_json_delta\"\n,\n\"partial_json\"\n:\n\"day\\\"}\"\n}\n}\nevent\n:\ncontent_block_stop\ndata\n:\n{\n\"type\"\n:\n\"content_block_stop\"\n,\n\"index\"\n:\n1\n}\nevent\n:\ncontent_block_start\ndata\n:\n{\n\"type\"\n:\n\"content_block_start\"\n,\n\"index\"\n:\n2\n,\n\"content_block\"\n:\n{\n\"type\"\n:\n\"web_search_tool_result\"\n,\n\"tool_use_id\"\n:\n\"srvtoolu_014hJH82Qum7Td6UV8gDXThB\"\n,\n\"content\"\n:\n[\n{\n\"type\"\n:\n\"web_search_result\"\n,\n\"title\"\n:\n\"Weather in New York City in May 2025 (New York) - detailed Weather Forecast for a month\"\n,\n\"url\"\n:\n\"https://world-weather.info/forecast/usa/new_york/may-2025/\"\n,\n\"encrypted_content\"\n:\n\"Ev0DCioIAxgCIiQ3NmU4ZmI4OC1k...\"\n,\n\"page_age\"\n:\nnull\n}\n,\n...\n]\n}\n}\nevent\n:\ncontent_block_stop\ndata\n:\n{\n\"type\"\n:\n\"content_block_stop\"\n,\n\"index\"\n:\n2\n}\nevent\n:\ncontent_block_start\ndata\n:\n{\n\"type\"\n:\n\"content_block_start\"\n,\n\"index\"\n:\n3\n,\n\"content_block\"\n:\n{\n\"type\"\n:\n\"text\"\n,\n\"text\"\n:\n\"\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n3\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\"Here's the current weather information for New York\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n3\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\" City:\\n\\n# Weather\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n3\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\" in New York City\"\n}\n}\nevent\n:\ncontent_block_delta\ndata\n:\n{\n\"type\"\n:\n\"content_block_delta\"\n,\n\"index\"\n:\n3\n,\n\"delta\"\n:\n{\n\"type\"\n:\n\"text_delta\"\n,\n\"text\"\n:\n\"\\n\\n\"\n}\n}\n...\nevent\n:\ncontent_block_stop\ndata\n:\n{\n\"type\"\n:\n\"content_block_stop\"\n,\n\"index\"\n:\n17\n}\nevent\n:\nmessage_delta\ndata\n:\n{\n\"type\"\n:\n\"message_delta\"\n,\n\"delta\"\n:\n{\n\"stop_reason\"\n:\n\"end_turn\"\n,\n\"stop_sequence\"\n:\nnull\n}\n,\n\"usage\"\n:\n{\n\"input_tokens\"\n:\n10682\n,\n\"cache_creation_input_tokens\"\n:\n0\n,\n\"cache_read_input_tokens\"\n:\n0\n,\n\"output_tokens\"\n:\n510\n,\n\"server_tool_use\"\n:\n{\n\"web_search_requests\"\n:\n1\n}\n}\n}\nevent\n:\nmessage_stop\ndata\n:\n{\n\"type\"\n:\n\"message_stop\"\n}\nWas this page helpful?\nYes\nNo\nExtended thinking\nBatch processing\nOn this page\nStreaming with SDKs\nEvent types\nPing events\nError events\nOther events\nContent block delta types\nText delta\nInput JSON delta\nThinking delta\nFull HTTP Stream response\nBasic streaming request\nStreaming request with tool use\nStreaming request with extended thinking\nStreaming request with web search tool use",
  "links": [
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/multilingual-support",
      "text": "Multilingual support"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/token-counting",
      "text": "Token counting"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/embeddings",
      "text": "Embeddings"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/vision",
      "text": "Vision"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/pdf-support",
      "text": "PDF support"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/files",
      "text": "Files API"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/agents-and-tools/claude-for-sheets",
      "text": "Google Sheets add-on"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/agents-and-tools/tool-use/overview",
      "text": "Overview"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/agents-and-tools/tool-use/implement-tool-use",
      "text": "How to implement tool use"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/agents-and-tools/tool-use/token-efficient-tool-use",
      "text": "Token-efficient tool use"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/agents-and-tools/tool-use/fine-grained-tool-streaming",
      "text": "Fine-grained tool streaming"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/agents-and-tools/tool-use/bash-tool",
      "text": "Bash tool"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/agents-and-tools/tool-use/code-execution-tool",
      "text": "Code execution tool"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/agents-and-tools/tool-use/computer-use-tool",
      "text": "Computer use tool"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/agents-and-tools/tool-use/text-editor-tool",
      "text": "Text editor tool"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/agents-and-tools/tool-use/web-search-tool",
      "text": "Web search tool"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/agents-and-tools/mcp-connector",
      "text": "MCP connector"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/agents-and-tools/remote-mcp-servers",
      "text": "Remote MCP servers"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/about-claude/use-case-guides/overview",
      "text": "Overview"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/about-claude/use-case-guides/ticket-routing",
      "text": "Ticket routing"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/about-claude/use-case-guides/customer-support-chat",
      "text": "Customer support agent"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/about-claude/use-case-guides/content-moderation",
      "text": "Content moderation"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/about-claude/use-case-guides/legal-summarization",
      "text": "Legal summarization"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/overview",
      "text": "Overview"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/claude-4-best-practices",
      "text": "Claude 4 best practices"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/prompt-generator",
      "text": "Prompt generator"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/prompt-templates-and-variables",
      "text": "Use prompt templates"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/prompt-improver",
      "text": "Prompt improver"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/be-clear-and-direct",
      "text": "Be clear and direct"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/multishot-prompting",
      "text": "Use examples (multishot prompting)"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/chain-of-thought",
      "text": "Let Claude think (CoT)"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/use-xml-tags",
      "text": "Use XML tags"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/system-prompts",
      "text": "Give Claude a role (system prompts)"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/prefill-claudes-response",
      "text": "Prefill Claude's response"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/chain-prompts",
      "text": "Chain complex prompts"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/long-context-tips",
      "text": "Long context tips"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips",
      "text": "Extended thinking tips"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/define-success",
      "text": "Define success criteria"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/develop-tests",
      "text": "Develop test cases"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/eval-tool",
      "text": "Using the Evaluation Tool"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/reduce-latency",
      "text": "Reducing latency"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/reduce-hallucinations",
      "text": "Reduce hallucinations"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/increase-consistency",
      "text": "Increase output consistency"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/mitigate-jailbreaks",
      "text": "Mitigate jailbreaks"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/handle-streaming-refusals",
      "text": "Streaming refusals"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/reduce-prompt-leak",
      "text": "Reduce prompt leak"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/keep-claude-in-character",
      "text": "Keep Claude in character"
    },
    {
      "url": "https://docs.anthropic.com/_sites/docs.anthropic.com/en/docs/build-with-claude/streaming",
      "text": "Event types"
    }
  ],
  "metadata": {
    "scraped_at": "2025-06-23T15:07:38.293057",
    "word_count": 3589,
    "link_count": 48,
    "content_length": 21272
  }
}
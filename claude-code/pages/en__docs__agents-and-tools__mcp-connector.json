{
  "url": "https://docs.anthropic.com/en/docs/agents-and-tools/mcp-connector",
  "title": "MCP connector - Anthropic",
  "text": "Anthropic\nhome page\nEnglish\nSearch...\nSearch...\nNavigation\nModel Context Protocol (MCP)\nMCP connector\nWelcome\nDeveloper Guide\nAPI Guide\nClaude Code\nModel Context Protocol (MCP)\nResources\nRelease Notes\nDocumentation\nDeveloper Discord\nSupport\nFirst steps\nIntro to Claude\nGet started\nModels & pricing\nModels overview\nChoosing a model\nMigrating to Claude 4\nModel deprecations\nPricing\nLearn about Claude\nBuilding with Claude\nFeatures overview\nContext windows\nGlossary\nCapabilities\nPrompt caching\nExtended thinking\nStreaming Messages\nBatch processing\nCitations\nMultilingual support\nToken counting\nEmbeddings\nVision\nPDF support\nFiles API\nGoogle Sheets add-on\nTools\nOverview\nHow to implement tool use\nToken-efficient tool use\nFine-grained tool streaming\nBash tool\nCode execution tool\nComputer use tool\nText editor tool\nWeb search tool\nModel Context Protocol (MCP)\nMCP connector\nRemote MCP servers\nUse cases\nOverview\nTicket routing\nCustomer support agent\nContent moderation\nLegal summarization\nPrompt engineering\nOverview\nClaude 4 best practices\nPrompt generator\nUse prompt templates\nPrompt improver\nBe clear and direct\nUse examples (multishot prompting)\nLet Claude think (CoT)\nUse XML tags\nGive Claude a role (system prompts)\nPrefill Claude's response\nChain complex prompts\nLong context tips\nExtended thinking tips\nTest & evaluate\nDefine success criteria\nDevelop test cases\nUsing the Evaluation Tool\nReducing latency\nStrengthen guardrails\nReduce hallucinations\nIncrease output consistency\nMitigate jailbreaks\nStreaming refusals\nReduce prompt leak\nKeep Claude in character\nLegal center\nAnthropic Privacy Policy\nSecurity and compliance\nClaude’s Model Context Protocol (MCP) connector feature enables you to connect to remote MCP servers directly from the Messages API without a separate MCP client.\nThis feature requires the beta header:\n\"anthropic-beta\": \"mcp-client-2025-04-04\"\n​\nKey features\nDirect API integration\n: Connect to MCP servers without implementing an MCP client\nTool calling support\n: Access MCP tools through the Messages API\nOAuth authentication\n: Support for OAuth Bearer tokens for authenticated servers\nMultiple servers\n: Connect to multiple MCP servers in a single request\n​\nLimitations\nOf the feature set of the\nMCP specification\n, only\ntool calls\nare currently supported.\nThe server must be publicly exposed through HTTP (supports both Streamable HTTP and SSE transports). Local STDIO servers cannot be connected directly.\nThe MCP connector is currently not supported on Amazon Bedrock and Google Vertex.\n​\nUsing the MCP connector in the Messages API\nTo connect to a remote MCP server, include the\nmcp_servers\nparameter in your Messages API request:\ncURL\nTypeScript\nPython\ncurl\nhttps://api.anthropic.com/v1/messages\n\\\n-H\n\"Content-Type: application/json\"\n\\\n-H\n\"X-API-Key:\n$ANTHROPIC_API_KEY\n\"\n\\\n-H\n\"anthropic-version: 2023-06-01\"\n\\\n-H\n\"anthropic-beta: mcp-client-2025-04-04\"\n\\\n-d\n'\n{\n\"model\"\n:\n\"claude-sonnet-4-20250514\"\n,\n\"max_tokens\"\n:\n1000\n,\n\"messages\"\n:\n[\n{\n\"role\"\n:\n\"user\"\n,\n\"content\"\n:\n\"What tools do you have available?\"\n}\n]\n,\n\"mcp_servers\"\n:\n[\n{\n\"type\"\n:\n\"url\"\n,\n\"url\"\n:\n\"https://example-server.modelcontextprotocol.io/sse\"\n,\n\"name\"\n:\n\"example-mcp\"\n,\n\"authorization_token\"\n:\n\"YOUR_TOKEN\"\n}\n]\n}\n'\n​\nMCP server configuration\nEach MCP server in the\nmcp_servers\narray supports the following configuration:\n{\n\"type\"\n:\n\"url\"\n,\n\"url\"\n:\n\"https://example-server.modelcontextprotocol.io/sse\"\n,\n\"name\"\n:\n\"example-mcp\"\n,\n\"tool_configuration\"\n:\n{\n\"enabled\"\n:\ntrue\n,\n\"allowed_tools\"\n:\n[\n\"example_tool_1\"\n,\n\"example_tool_2\"\n]\n}\n,\n\"authorization_token\"\n:\n\"YOUR_TOKEN\"\n}\n​\nField descriptions\nProperty\nType\nRequired\nDescription\ntype\nstring\nYes\nCurrently only “url” is supported\nurl\nstring\nYes\nThe URL of the MCP server. Must start with https://\nname\nstring\nYes\nA unique identifier for this MCP server. It will be used in\nmcp_tool_call\nblocks to identify the server and to disambiguate tools to the model.\ntool_configuration\nobject\nNo\nConfigure tool usage\ntool_configuration.enabled\nboolean\nNo\nWhether to enable tools from this server (default: true)\ntool_configuration.allowed_tools\narray\nNo\nList to restrict the tools to allow (by default, all tools are allowed)\nauthorization_token\nstring\nNo\nOAuth authorization token if required by the MCP server. See\nMCP specification\n.\n​\nResponse content types\nWhen Claude uses MCP tools, the response will include two new content block types:\n​\nMCP Tool Use Block\n{\n\"type\"\n:\n\"mcp_tool_use\"\n,\n\"id\"\n:\n\"mcptoolu_014Q35RayjACSWkSj4X2yov1\"\n,\n\"name\"\n:\n\"echo\"\n,\n\"server_name\"\n:\n\"example-mcp\"\n,\n\"input\"\n:\n{\n\"param1\"\n:\n\"value1\"\n,\n\"param2\"\n:\n\"value2\"\n}\n}\n​\nMCP Tool Result Block\n{\n\"type\"\n:\n\"mcp_tool_result\"\n,\n\"tool_use_id\"\n:\n\"mcptoolu_014Q35RayjACSWkSj4X2yov1\"\n,\n\"is_error\"\n:\nfalse\n,\n\"content\"\n:\n[\n{\n\"type\"\n:\n\"text\"\n,\n\"text\"\n:\n\"Hello\"\n}\n]\n}\n​\nMultiple MCP servers\nYou can connect to multiple MCP servers by including multiple objects in the\nmcp_servers\narray:\n{\n\"model\"\n:\n\"claude-sonnet-4-20250514\"\n,\n\"max_tokens\"\n:\n1000\n,\n\"messages\"\n:\n[\n{\n\"role\"\n:\n\"user\"\n,\n\"content\"\n:\n\"Use tools from both mcp-server-1 and mcp-server-2 to complete this task\"\n}\n]\n,\n\"mcp_servers\"\n:\n[\n{\n\"type\"\n:\n\"url\"\n,\n\"url\"\n:\n\"https://mcp.example1.com/sse\"\n,\n\"name\"\n:\n\"mcp-server-1\"\n,\n\"authorization_token\"\n:\n\"TOKEN1\"\n}\n,\n{\n\"type\"\n:\n\"url\"\n,\n\"url\"\n:\n\"https://mcp.example2.com/sse\"\n,\n\"name\"\n:\n\"mcp-server-2\"\n,\n\"authorization_token\"\n:\n\"TOKEN2\"\n}\n]\n}\n​\nAuthentication\nFor MCP servers that require OAuth authentication, you’ll need to obtain an access token. The MCP connector beta supports passing an\nauthorization_token\nparameter in the MCP server definition.\nAPI consumers are expected to handle the OAuth flow and obtain the access token prior to making the API call, as well as refreshing the token as needed.\n​\nObtaining an access token for testing\nThe MCP inspector can guide you through the process of obtaining an access token for testing purposes.\nRun the inspector with the following command. You need Node.js installed on your machine.\nnpx @modelcontextprotocol/inspector\nIn the sidebar on the left, for “Transport type”, select either “SSE” or “Streamable HTTP”.\nEnter the URL of the MCP server.\nIn the right area, click on the “Open Auth Settings” button after “Need to configure authentication?”.\nClick “Quick OAuth Flow” and authorize on the OAuth screen.\nFollow the steps in the “OAuth Flow Progress” section of the inspector and click “Continue” until you reach “Authentication complete”.\nCopy the\naccess_token\nvalue.\nPaste it into the\nauthorization_token\nfield in your MCP server configuration.\n​\nUsing the access token\nOnce you’ve obtained an access token using either OAuth flow above, you can use it in your MCP server configuration:\n{\n\"mcp_servers\"\n:\n[\n{\n\"type\"\n:\n\"url\"\n,\n\"url\"\n:\n\"https://example-server.modelcontextprotocol.io/sse\"\n,\n\"name\"\n:\n\"authenticated-server\"\n,\n\"authorization_token\"\n:\n\"YOUR_ACCESS_TOKEN_HERE\"\n}\n]\n}\nFor detailed explanations of the OAuth flow, refer to the\nAuthorization section\nin the MCP specification.\nWas this page helpful?\nYes\nNo\nWeb search tool\nRemote MCP servers\nOn this page\nKey features\nLimitations\nUsing the MCP connector in the Messages API\nMCP server configuration\nField descriptions\nResponse content types\nMCP Tool Use Block\nMCP Tool Result Block\nMultiple MCP servers\nAuthentication\nObtaining an access token for testing\nUsing the access token",
  "links": [
    {
      "url": "https://docs.anthropic.com/en/docs/about-claude/use-case-guides/overview",
      "text": "Overview"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/about-claude/use-case-guides/ticket-routing",
      "text": "Ticket routing"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/about-claude/use-case-guides/customer-support-chat",
      "text": "Customer support agent"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/about-claude/use-case-guides/content-moderation",
      "text": "Content moderation"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/about-claude/use-case-guides/legal-summarization",
      "text": "Legal summarization"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/overview",
      "text": "Overview"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/claude-4-best-practices",
      "text": "Claude 4 best practices"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/prompt-generator",
      "text": "Prompt generator"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/prompt-templates-and-variables",
      "text": "Use prompt templates"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/prompt-improver",
      "text": "Prompt improver"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/be-clear-and-direct",
      "text": "Be clear and direct"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/multishot-prompting",
      "text": "Use examples (multishot prompting)"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/chain-of-thought",
      "text": "Let Claude think (CoT)"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/use-xml-tags",
      "text": "Use XML tags"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/system-prompts",
      "text": "Give Claude a role (system prompts)"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/prefill-claudes-response",
      "text": "Prefill Claude's response"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/chain-prompts",
      "text": "Chain complex prompts"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/long-context-tips",
      "text": "Long context tips"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips",
      "text": "Extended thinking tips"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/define-success",
      "text": "Define success criteria"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/develop-tests",
      "text": "Develop test cases"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/eval-tool",
      "text": "Using the Evaluation Tool"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/reduce-latency",
      "text": "Reducing latency"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/reduce-hallucinations",
      "text": "Reduce hallucinations"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/increase-consistency",
      "text": "Increase output consistency"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/mitigate-jailbreaks",
      "text": "Mitigate jailbreaks"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/handle-streaming-refusals",
      "text": "Streaming refusals"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/reduce-prompt-leak",
      "text": "Reduce prompt leak"
    },
    {
      "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/keep-claude-in-character",
      "text": "Keep Claude in character"
    }
  ],
  "metadata": {
    "scraped_at": "2025-06-23T15:07:44.357340",
    "word_count": 1090,
    "link_count": 29,
    "content_length": 7302
  }
}
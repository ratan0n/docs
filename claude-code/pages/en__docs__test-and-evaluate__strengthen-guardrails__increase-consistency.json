{
  "url": "https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/increase-consistency",
  "title": "Increase output consistency (JSON mode) - Anthropic",
  "text": "Anthropic\nhome page\nEnglish\nSearch...\nSearch...\nNavigation\nStrengthen guardrails\nIncrease output consistency (JSON mode)\nWelcome\nDeveloper Guide\nAPI Guide\nClaude Code\nModel Context Protocol (MCP)\nResources\nRelease Notes\nDocumentation\nDeveloper Discord\nSupport\nFirst steps\nIntro to Claude\nGet started\nModels & pricing\nModels overview\nChoosing a model\nMigrating to Claude 4\nModel deprecations\nPricing\nLearn about Claude\nBuilding with Claude\nFeatures overview\nContext windows\nGlossary\nCapabilities\nPrompt caching\nExtended thinking\nStreaming Messages\nBatch processing\nCitations\nMultilingual support\nToken counting\nEmbeddings\nVision\nPDF support\nFiles API\nGoogle Sheets add-on\nTools\nOverview\nHow to implement tool use\nToken-efficient tool use\nFine-grained tool streaming\nBash tool\nCode execution tool\nComputer use tool\nText editor tool\nWeb search tool\nModel Context Protocol (MCP)\nMCP connector\nRemote MCP servers\nUse cases\nOverview\nTicket routing\nCustomer support agent\nContent moderation\nLegal summarization\nPrompt engineering\nOverview\nClaude 4 best practices\nPrompt generator\nUse prompt templates\nPrompt improver\nBe clear and direct\nUse examples (multishot prompting)\nLet Claude think (CoT)\nUse XML tags\nGive Claude a role (system prompts)\nPrefill Claude's response\nChain complex prompts\nLong context tips\nExtended thinking tips\nTest & evaluate\nDefine success criteria\nDevelop test cases\nUsing the Evaluation Tool\nReducing latency\nStrengthen guardrails\nReduce hallucinations\nIncrease output consistency\nMitigate jailbreaks\nStreaming refusals\nReduce prompt leak\nKeep Claude in character\nLegal center\nAnthropic Privacy Policy\nSecurity and compliance\nHere’s how to make Claude’s responses more consistent:\n​\nSpecify the desired output format\nPrecisely define your desired output format using JSON, XML, or custom templates so that Claude understands every output formatting element you require.\nExample: Standardizing customer feedback\nRole\nContent\nUser\nYou’re a Customer Insights AI. Analyze this feedback and output in JSON format with keys: “sentiment” (positive/negative/neutral), “key_issues” (list), and “action_items” (list of dicts with “team” and “task”).\n”I’ve been a loyal user for 3 years, but the recent UI update is a disaster. Finding basic features is now a scavenger hunt. Plus, the new ‘premium’ pricing is outrageous. I’m considering switching unless this is fixed ASAP.”\nAssistant\n{\n“sentiment”: “negative”,\n“key_issues”: [\n“Poor UI/UX in recent update”,\n“Difficulty finding basic features”,\n“Perceived high pricing (new ‘premium’ tier)”\n],\n“action_items”: [\n{\n“team”: “Product”,\n“task”: “Conduct usability testing and iterate on UI based on findings”\n},\n{\n“team”: “UX”,\n“task”: “Create a feature discovery guide or onboarding flow”\n},\n{\n“team”: “Marketing”,\n“task”: “Review pricing strategy and communicate value proposition”\n},\n{\n“team”: “Customer Success”,\n“task”: “Reach out to user, offer concessions to prevent churn”\n}\n]\n}\n​\nPrefill Claude’s response\nPrefill the\nAssistant\nturn with your desired format. This trick bypasses Claude’s friendly preamble and enforces your structure.\nExample: Daily sales report\nRole\nContent\nUser\nYou’re an insightful Sales Intelligence AI. Generate today’s sales report.\nStructure the report like this:\n<report>\n<summary>\n<metric name=“total_revenue”>$0.00</metric>\n<metric name=“units_sold”>0</metric>\n<metric name=“avg_order_value”>$0.00</metric>\n</summary>\n<top_products>\n<product>\n<name>Product Name</name>\n<revenue>$0.00</revenue>\n<units>0</units>\n</product>\n…\n</top_products>\n<regional_performance>\n<region>\n<name>Region Name</name>\n<revenue>$0.00</revenue>\n<growth>0.0%</growth>\n</region>\n…\n</regional_performance>\n<action_items>\n<item>Action item.</item>\n…\n</action_items>\n</report>\nAssistant (prefill)\n<report>\n<summary>\n<metric name=\nAssistant\n”total_revenue”>$842,567.00</metric>\n<metric name=“units_sold”>15,238</metric>\n<metric name=“avg_order_value”>$55.29</metric>\n</summary>\n<top_products>\n<product>\n<name>AcmeGuard Pro</name>\n<revenue>$325,890.00</revenue>\n<units>3,621</units>\n</product>\n<product>\n<name>AcmeVault Enterprise</name>\n<revenue>$254,400.00</revenue>\n<units>1,272</units>\n</product>\n<product>\n<name>AcmeBoost XL</name>\n<revenue>$147,690.00</revenue>\n<units>4,923</units>\n</product>\n</top_products>\n<regional_performance>\n<region>\n<name>APAC</name>\n<revenue>$258,960.00</revenue>\n<growth>12.8%</growth>\n</region>\n<region>\n<name>EMEA</name>\n<revenue>$325,478.00</revenue>\n<growth>3.2%</growth>\n</region>\n<region>\n<name>Americas</name>\n<revenue>$258,129.00</revenue>\n<growth>-2.1%</growth>\n</region>\n</regional_performance>\n<action_items>\n<item>Investigate Americas revenue drop; schedule regional sales team meeting.</item>\n<item>Accelerate CloudGuard Pro rollout in APAC to capitalize on growth.</item>\n<item>Review NetBoost XL pricing; high volume but lower revenue.</item>\n</action_items>\n</report>\n​\nConstrain with examples\nProvide examples of your desired output. This trains Claude’s understanding better than abstract instructions.\nExample: Generating consistent market intelligence\nRole\nContent\nUser\nAs a Market Intelligence AI, your task is to analyze data about our competitors. Here is our competitor data:\n<data>\n{{DATA}}\n</data>\nOutput following this example format:\n<competitor>\n<name>Rival Inc</name>\n<overview>A 50-word summary.</overview>\n<swot>\n<strengths>- Bullet points</strengths>\n<weaknesses>- Bullet points</weaknesses>\n<opportunities>- Bullet points</opportunities>\n<threats>- Bullet points</threats>\n</swot>\n<strategy>A 30-word strategic response.</strategy>\n</competitor>\nNow, analyze AcmeGiant and AcmeDataCo using this format.\nAssistant\n<competitor>\n<name>AcmeGiant</name>\n<overview>Global tech leader with a vast ecosystem of consumer and enterprise products. Known for innovation, strong brand, and deep customer lock-in through integrated hardware, software, and services.</overview>\n<swot>\n<strengths>\n- Massive R&D budget fuels continuous innovation\n- Loyal customer base and powerful brand recognition\n- Synergistic product ecosystem increases switching costs\n</strengths>\n<weaknesses>\n- High prices may deter cost-sensitive customers\n- Slow to address enterprise-specific customization needs\n- Privacy concerns and regulatory scrutiny in multiple markets\n</weaknesses>\n<opportunities>\n- Growing demand for AI and ML capabilities\n- Expansion into emerging markets\n- Acquisitions to fill product or talent gaps\n</opportunities>\n<threats>\n- Rapid rise of cloud-native competitors\n- Antitrust lawsuits and regulatory actions\n- Talent poaching by startups and competitors\n</threats>\n</swot>\n<strategy>Focus on our agility and customization. Target TechGiant’s slow enterprise response and privacy issues in our marketing.</strategy>\n</competitor>\n<competitor>\n<name>AcmeDataCo</name>\n<overview>Rising star in data analytics and visualization. Offers intuitive, self-service BI tools with a freemium model, appealing to startups and enterprise teams alike.</overview>\n<swot>\n<strengths>\n- User-friendly interface reduces need for specialized training\n- Freemium model lowers barrier to entry, drives viral growth\n- Strong product-market fit with rise of data-driven decisions\n</strengths>\n<weaknesses>\n- Limited advanced analytics compared to established BI tools\n- Scaling issues reported with very large datasets\n- Dependent on third-party cloud infrastructure (AWS)\n</weaknesses>\n<opportunities>\n- Expanding into predictive analytics and AI-driven insights\n- Forming strategic alliances with complementary tech vendors\n- Customizable dashboards for industry-specific solutions\n</opportunities>\n<threats>\n- Market saturation; many new entrants in self-service BI\n- Enterprise BI giants developing more user-friendly tools\n- Data privacy regulations increasing compliance complexity\n</threats>\n</swot>\n<strategy>Highlight our robust enterprise features and data governance. Target accounts struggling with DataCo’s scale limitations.</strategy>\n</competitor>\n​\nUse retrieval for contextual consistency\nFor tasks requiring consistent context (e.g., chatbots, knowledge bases), use retrieval to ground Claude’s responses in a fixed information set.\nExample: Enhancing IT support consistency\nRole\nContent\nUser\nYou’re our IT Support AI that draws on knowledge base data. Here are entries from your knowledge base:\n<kb>\n<entry>\n<id>1</id>\n<title>Reset Active Directory password</title>\n<content>1. Go to password.ourcompany.com\n2. Enter your username\n3. Click “Forgot Password”\n4. Follow email instructions</content>\n</entry>\n<entry>\n<id>2</id>\n<title>Connect to VPN</title>\n<content>1. Install GlobalProtect from software center\n2. Open GlobalProtect, enter “vpn.ourcompany.com”\n3. Use AD credentials to log in</content>\n</entry>\n</kb>\nWhen helping users, always check the knowledge base first. Respond in this format:\n<response>\n<kb_entry>Knowledge base entry used</kb_entry>\n<answer>Your response</answer>\n</response> Write some test questions for yourself and answer them using the knowledge base, just to make sure you understand how to use the knowledge base properly.\nAssistant\nUnderstood. I’ll use the knowledge base for consistent responses. Let’s test with a couple of scenarios.\nUser: Hey, I can’t log into my email. I think I forgot my password.\n<response>\n<kb_entry>1: Reset Active Directory password</entry>\n<answer>I understand you’re having trouble logging into your email due to a forgotten password. No worries, this is a common issue. To reset your Active Directory password, which is used for email access, follow these steps:\n1. Go to password.ourcompany.com\n2. Enter your username (same as your email address)\n3. Click on the “Forgot Password” link\n4. You’ll receive an email with instructions. Follow them to reset your password.\nAfter resetting, you should be able to log into your email. Let me know if you need any further assistance.</answer>\n</response>\nUser: I’m working from home today. How do I access internal resources?\n<response>\n<kb_entry>2: Connect to VPN</entry>\n<answer>Great question! To access internal resources while working from home, you’ll need to connect to our company VPN (Virtual Private Network). Here’s how to set that up:\n1. First, install the GlobalProtect VPN client. You can find this in our software center.\n2. Once installed, open the GlobalProtect application.\n3. In the server field, enter “vpn.ourcompany.com”.\n4. Use your Active Directory (AD) credentials to log in - the same username and password you use for your email.\nOnce connected, you’ll have secure access to all internal resources as if you were in the office. Let me know if you run into any issues during setup.</answer>\n</response>\n​\nChain prompts for complex tasks\nBreak down complex tasks into smaller, consistent subtasks. Each subtask gets Claude’s full attention, reducing inconsistency errors across scaled workflows.\nWas this page helpful?\nYes\nNo\nReduce hallucinations\nMitigate jailbreaks\nOn this page\nSpecify the desired output format\nPrefill Claude’s response\nConstrain with examples\nUse retrieval for contextual consistency\nChain prompts for complex tasks",
  "links": [],
  "metadata": {
    "scraped_at": "2025-06-23T15:07:53.371592",
    "word_count": 1408,
    "link_count": 0,
    "content_length": 11093
  }
}